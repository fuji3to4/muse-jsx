# 開発メモ

## 気づいたこと

### バッテリー関連
- バッテリーのタグは参考コードでは `0x98` と記載されていたが、実際の Athena デバイスでは `0x88` で送信されていた
- バッテリーデータは配列として複数の値が送られてくるが、詳細な仕様は不明
- 使用時間に応じて少しずつ減少する数値があり、demo サイトではその値をそのまま表示している

### Preset について
- 現在、デフォルトでは `p1045` で起動している
- 他に `p1034`、`p1035`、`p21` などのプリセットが存在する
- 現在の実装では、どのプリセットでもデータ取得は可能だが、周波数などは適切に適用されていない
- 正しいデータを取得できていない可能性がある

### EEG データの特徴
- demo サイトで EEG をリアルタイム出力したところ、Muse S (Classic) よりもブレが大きい印象
- scale factor の調整が必要かもしれない
- プリセットごとに EEG の特徴が異なる点が気になる
- ただし、どのプリセットでも瞬きなどの筋電位には反応する

### パケット構造
- パケットの ID は index=9 のバイトに格納されている

---

## Packet ID Byte の仕様

### 上位 4 ビット（周波数）
- `0` = 周波数無効
- `1` = 256 Hz
- `2` = 128 Hz
- `3` = 64 Hz
- `4` = 52 Hz
- `5` = 32 Hz
- `6` = 16 Hz
- `7` = 10 Hz
- `8` = 1 Hz
- `9` = 0.1 Hz

### 下位 4 ビット（データタイプ）
- `0` = 無効
- `1` = EEG (4 チャンネル)
- `2` = EEG (8 チャンネル)
- `3` = DRL/REF
- `4` = Optics (4 チャンネル)
- `5` = Optics (8 チャンネル)
- `6` = Optics (16 チャンネル)
- `7` = 加速度計 + ジャイロスコープ
- `8` = バッテリー

---

## 参考資料
- [AbosaSzakal/MuseAthenaDataformatParser](https://github.com/AbosaSzakal/MuseAthenaDataformatParser)



